"use strict";

const DevkitBaseError = require("./devkit-base-error.js");

class UuAppClientError extends DevkitBaseError {

  /**
   * `UuAppClientError` class for representing errors in UuAppClient calls.
   * 
   * @class
   * @classdesc Represents an error that occurs during an UuAppClient call.
   * @param {string} message - A description of the error.
   * @param {number} statusCode - The HTTP status code returned by the API.
   * @param {string} responseBody - The response body or error details from the API.
   * @extends {DevkitBaseError}
   */
  constructor(message, statusCode, responseBody) {
    let paramMap = {};
    paramMap.status = statusCode;
    if (responseBody && responseBody.startsWith("{") && responseBody.endsWith("}")) {
      try {
        paramMap.dtoOut = JSON.parse(responseBody);
      } catch (e) {
        // error body is not json
        paramMap.responseBody = responseBody;
      }
    } else {
      // error body is not json
      paramMap.responseBody = responseBody;
    }

    super(message, { paramMap });
    this.name = "UuAppClientError";
    this.status = statusCode;
    this.responseBody = responseBody;
  }

}

module.exports = UuAppClientError;
