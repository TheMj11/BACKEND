"use strict";

const CloudClient = require("./cloud-client.js");
const DevkitBaseError = require("../errors/devkit-base-error.js");

class LogStoreClient extends CloudClient {

  constructor(environment, opts = {}) {
    let baseUri = (opts && opts.baseUri) || environment.getArgumentValue("uuCloudLogStoreBaseUri") || environment.getDevkitConfig()["uuCloudLogStoreBaseUri"] || "UNDEFINED";
    if (!baseUri || baseUri === "UNDEFINED") {
      throw new DevkitBaseError("Missing parameter: uuCloudLogStoreBaseUri");
    }
    super(environment, {...opts, baseUri}, "log");
  }

  async getRecordList(parameters = null) {
    try {
      return await this._get("getRecordList", parameters);
    } catch (e) {
      throw new DevkitBaseError("Listing of log records failed.", null, e);
    }
  }

}

module.exports = LogStoreClient;
