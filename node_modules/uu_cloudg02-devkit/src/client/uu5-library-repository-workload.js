const CloudClient = require("./cloud-client");
const DevkitBaseError = require("../errors/devkit-base-error");

class Uu5LibraryRepositoryWorkloadClient extends CloudClient {
  constructor(environment, opts = {}) {
    super(environment, opts, "uu5LibraryRepositoryWorkload");
  }

  async load(oid, extended) {
    try {
      return await this._get("load", { oid, extended });
    } catch (e) {
      throw new DevkitBaseError("Loading uu5LibraryRepositoryWorkload failed.", null, e);
    }
  }

  async prepareForDeployment(oid) {
    try {
      return await this._post("prepareForDeployment", { oid });
    } catch (e) {
      throw new DevkitBaseError("Preparing uu5LibraryRepositoryWorkload for deployment failed.", null, e);
    }
  }

  async deploy(oid, uuAppBoxUri) {
    try {
      return await this._post("deploy", { oid, uuAppBoxUri });
    } catch (e) {
      throw new DevkitBaseError("Deploying uu5LibraryRepositoryWorkload failed.", null, e);
    }
  }
}

module.exports = Uu5LibraryRepositoryWorkloadClient;
