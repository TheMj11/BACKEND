"use strict";

const CloudClient = require("./cloud-client.js");
const DevkitBaseError = require("../errors/devkit-base-error.js");

class ResourcePool extends CloudClient {

  constructor(environment, opts = {}) {
    super(environment, opts, "uuAppResourcePool");
  }

  async get(oid) {
    try {
      return await this._get("get", {oid});
    } catch (e) {
      throw new DevkitBaseError("Getting of resource pool configuration failed.", null, e);
    }
  }

  async getAvailableSlotMap(oid) {
    try {
      return await this._get("getAvailableSlotMap", {oid});
    } catch (e) {
      throw new DevkitBaseError("Getting available slot map failed.", null, e);
    }
  }

  async allocateUuAppResources(oid, uuAppResourceTypeMap, uuCloudResourceOidMap) {
    try {
      return await this._post("allocateUuAppResources", {oid, uuAppResourceTypeMap, uuCloudResourceOidMap});
    } catch (e) {
      throw new DevkitBaseError("Allocating uuAppResources failed.", null, e);
    }
  }

}

module.exports = ResourcePool;
